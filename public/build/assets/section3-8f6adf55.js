import{M as v}from"./MainLayout-437e79c3.js";import{C as I}from"./card-23fc99ff.js";import{I as N}from"./InputText-f9ac326c.js";import{I as S}from"./InputFile-6c8dd067.js";import{I as j}from"./InputSelect-1370e3e0.js";import{h,r as d,o as n,d as p,w as k,b as r,c as l,F as g,m as C,g as c,t as U,a as u}from"./app-1e1e7699.js";import{B as V}from"./ButtonSubmit-13f22934.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";const F={layout:v,props:{dataAgen:Object,auth:Object},components:{card:I,InputText:N,InputSelect:j,InputFile:S,ButtonSubmit:V},setup(s){const t=h({id:s.dataAgen.user_id,ktp:null,kk:null,pendidikan_terakhir:null}),o=h({id:s.dataAgen.user_id,file:s.dataAgen.file});return{form:t,form_status:o}},updated(){this.data_label={ktp:this.dataAgen.dokumen?this.dataAgen.dokumen.ktp:null,kk:this.dataAgen.dokumen?this.dataAgen.dokumen.kk:null,pendidikan_terakhir:this.dataAgen.dokumen?this.dataAgen.dokumen.pendidikan_terakhir:null}},data(){return{inputKey:null,inputFile:null,data_label:{ktp:this.dataAgen.dokumen?this.dataAgen.dokumen.ktp:null,kk:this.dataAgen.dokumen?this.dataAgen.dokumen.kk:null,pendidikan_terakhir:this.dataAgen.dokumen?this.dataAgen.dokumen.pendidikan_terakhir:null},status:[{nama:"diproses"},{nama:"terverifikasi"},{nama:"ditolak"}],admin_superAdmin:this.auth.role=="admin"||this.auth.role=="super admin"}},methods:{submit(){this.form.post(route("pengaturan.agen.tambah_dokumen"),{preserveScroll:!0,onSuccess:async()=>{await this.$forceUpdate()}})},submit_status(){this.form_status.post(route("pengaturan.agen.status_dokumen"),{preserveScroll:!0})},data_file(s){var t=null,o=[...this.dataAgen.user.master_file];return o.find(e=>e.jenis==s?t="File Telah Di Upload":!1),t}}},K={class:"flex gap-2 flex-col justify-start"},T={class:"grid"},w={key:0,class:"flex mb-2 flex-col"},D={class:"uppercase"},L=["href"],M={class:"flex justify-end"};function O(s,t,o,e,m,i){const b=d("input-select"),f=d("input-file"),_=d("button-submit"),A=d("card");return n(),p(A,{title:"Dokumen Kelengkapan",class:"h-max"},{default:k(()=>[r("div",K,[r("div",T,[m.admin_superAdmin?(n(),l("div",w,[(n(!0),l(g,null,C(e.form_status.file,(a,y)=>(n(),l("div",{class:"mb-5",key:a.status},[r("div",D,[c(U(y)+" : ",1),r("a",{href:a[0].file,class:"link link-hover",target:"_blank"},"download",8,L)]),u(b,{dataSelect:m.status,inputValue:a[0].status,"onUpdate:inputValue":x=>a[0].status=x,label:"nama",pick:"nama",title:"ubah status",sm:""},null,8,["dataSelect","inputValue","onUpdate:inputValue"])]))),128))])):(n(),l(g,{key:1},[u(f,{type:".png, .jpg, .pdf",fileName:i.data_file("ktp"),title:"KTP",form:e.form,"onUpdate:form":t[0]||(t[0]=a=>e.form=a),dataIndex:"ktp"},null,8,["fileName","form"]),u(f,{type:".png, .jpg, .pdf",fileName:i.data_file("kk"),title:"KK",form:e.form,"onUpdate:form":t[1]||(t[1]=a=>e.form=a),dataIndex:"kk"},null,8,["fileName","form"]),u(f,{type:".png, .jpg, .pdf",title:"Pendidikan Terakhir",fileName:i.data_file("pendidikan_terakhir"),form:e.form,"onUpdate:form":t[2]||(t[2]=a=>e.form=a),dataIndex:"pendidikan_terakhir"},null,8,["fileName","form"])],64))]),r("div",M,[m.admin_superAdmin?(n(),p(_,{key:1,form:e.form_status,onClick:i.submit_status,type:"success"},{default:k(()=>[c("simpan")]),_:1},8,["form","onClick"])):(n(),p(_,{key:0,form:e.form,onClick:i.submit,type:"success"},{default:k(()=>[c("simpan")]),_:1},8,["form","onClick"]))])])]),_:1})}const R=B(F,[["render",O]]);export{R as default};
