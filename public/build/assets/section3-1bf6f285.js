import{B as x}from"./ButtonSubmit-13f22934.js";import{C as P}from"./card-23fc99ff.js";/* empty css                */import{L as c}from"./leaflet-src-ccbfcb4d.js";import{M as z}from"./ModalLg-eeeaf3d4.js";import{U as h,V as v,A as k,o as u,c as y,Q as A,z as S,b as d,t as V,e as L,a as w,w as f,F as B,h as M,G as C,d as b,u as i,g as T}from"./app-1e1e7699.js";import"./_plugin-vue_export-helper-c27b6911.js";const N=["id"],U={__name:"mapPolygon",props:{id:String,setView:Array,mark:Array,centerPolygon:Array,zoom:Number,modelValue:Array},emits:["update:modelValue","update:centerPolygon"],async setup(l,{emit:a}){let e,o;const t=l;var r,s=[],n,g=c.icon({iconUrl:"https://img.icons8.com/bubbles/100/null/home-page.png",iconSize:[45,45]});return[e,o]=h(async()=>v(async()=>{var p=await document.getElementById(t.id);await p&&p.remove()})),await e,o(),k(async()=>{r=c.map(t.id).setView(t.setView?t.setView:[51.505,-.09],t.zoom?t.zoom:13),await c.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(r),t.mark&&c.marker(t.setView,{icon:g}).addTo(r),r.on("click",async m=>{var _=await new c.marker([m.latlng.lat,m.latlng.lng],{draggable:!0}).addTo(r);await p(),await _.on("dragend",()=>{p()}),await _.on("click",()=>{_.remove(),p()})});async function p(){s=[],await n&&n.remove(),await r.eachLayer(m=>{m.options.draggable&&s.push([m._latlng.lat,m._latlng.lng])}),n=c.polygon(s,{color:"#4A89F3"}).addTo(r),a("update:modelValue",s),a("update:centerPolygon",[n.getCenter().lat,n.getCenter().lng])}}),(p,m)=>(u(),y("div",{class:"h-full w-full",id:t.id},null,8,N))}},Z={class:"form-control w-full"},$={class:"form-control w-full"},F={class:"label"},E={class:"label-text capitalize"},O={class:"grid grid-cols-4 lg:grid-cols-6 gap-2"},j=["value","placeholder"],I=["for"],D={key:0,class:"label"},G={class:"label-text-alt text-error"},Q=["disabled"],q={__name:"inputMapsPolygon",props:{title:String,id:String,form:Object,error:String,setView:Array,modelValue:Array,centerLatLang:Array,zoom:Number},emits:["update:modelValue","update:centerLatLang"],setup(l,{emit:a}){const e=l,o=A({polygon:e.modelValue?e.modelValue:[],center:e.centerLatLang?e.centerLatLang:[]});function t(){o.polygon.length>3&&(a("update:modelValue",o.polygon),document.getElementById(e.id).click())}return S(()=>o.center,r=>{a("update:centerLatLang",r)}),(r,s)=>(u(),y(B,null,[d("div",Z,[d("div",$,[d("label",F,[d("span",E,V(l.title),1)]),d("div",O,[d("input",{type:"text",value:o.polygon,disabled:"",placeholder:"Masukkan "+l.title,class:"input order-last input-bordered w-full lg:col-span-5 col-span-3"},null,8,j),d("label",{for:e.id,class:"btn btn-primary col-span-1"}," maps ",8,I)]),e.form.errors[l.error]?(u(),y("label",D,[d("span",G,V(l.error),1)])):L("",!0)])]),w(z,{id:e.id,close:""},{action:f(()=>[d("button",{class:"btn btn-success",disabled:o.polygon.length<4,onClick:t},"simpan",8,Q)]),default:f(()=>[w(U,{class:"h-[24rem]",centerPolygon:o.center,"onUpdate:centerPolygon":s[0]||(s[0]=n=>o.center=n),modelValue:o.polygon,"onUpdate:modelValue":s[1]||(s[1]=n=>o.polygon=n),id:"mapsPolygonDeveloper",zoom:l.zoom,mark:l.setView,setView:l.setView},null,8,["centerPolygon","modelValue","zoom","mark","setView"])]),_:1},8,["id"])],64))}},H=["id"],J={__name:"mapView",props:{setView:Array,setPolygon:Array,setZoom:Number,id:String},async setup(l){let a,e;const o=l;var t,r=c.icon({iconUrl:"https://img.icons8.com/bubbles/100/null/home-page.png",iconSize:[45,45]});return[a,e]=h(async()=>v(async()=>{var s=await document.getElementById(o.id);await s&&s.remove()})),await a,e(),k(async()=>{t=c.map(o.id).setView(o.setView,o.setZoom),await c.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(t),c.marker(o.setView,{icon:r}).addTo(t),o.setPolygon&&c.polygon(o.setPolygon,{color:"#4A89F3"}).addTo(t)}),(s,n)=>(u(),y("div",{id:o.id,class:"w-full h-[24rem] z-0"},null,8,H))}},K={class:"flex justify-end mt-4"},ae={__name:"section3",props:{developer:Object},setup(l){const a=l,e=M({polygon:a.developer.polygon?a.developer.polygon:null,mark:a.developer.mark?a.developer.mark:[]}),o=C(()=>e.mark.length?e.mark:[a.developer.kecamatan.lat,a.developer.kecamatan.long]),t=18;e.polygon&&e.polygon;const r=()=>{e.post(route("pengaturan.developer.simpan_lokasi",{developer:a.developer.id}),{preserveScroll:!0})};return(s,n)=>a.developer?(u(),b(P,{key:0,title:"Pemetaan Lokasi"},{default:f(()=>[(u(),b(J,{id:"viewPemetaan",key:i(e).polygon,setView:i(o),setPolygon:i(e).polygon,setZoom:t},null,8,["setView","setPolygon"])),w(q,{title:"Batasi Area Perumahan",centerLatLang:i(e).mark,"onUpdate:centerLatLang":n[0]||(n[0]=g=>i(e).mark=g),modelValue:i(e).polygon,"onUpdate:modelValue":n[1]||(n[1]=g=>i(e).polygon=g),id:"input_polygon",form:i(e),setView:i(o),zoom:18},null,8,["centerLatLang","modelValue","form","setView"]),d("div",K,[w(x,{onClick:r,disabled:!i(e).mark||!i(e).polygon,form:i(e),type:"success"},{default:f(()=>[T("Simpan")]),_:1},8,["disabled","form"])])]),_:1})):L("",!0)}};export{ae as default};
