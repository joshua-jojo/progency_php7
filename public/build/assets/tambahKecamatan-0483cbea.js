import{C as B}from"./card-23fc99ff.js";import{h as f,r as m,o,c as _,a as s,w as l,d,F as k,b as t,j as I,l as N,m as M,t as b,n as K,g as U}from"./app-1e1e7699.js";import z from"./map-0e219875.js";import{I as j}from"./InputMapsMark-624f9b2f.js";import{I as T}from"./InputText-f9ac326c.js";import D from"./mapsTambah-b540aca2.js";import{I as E}from"./inputSelect-fc13baae.js";import{M as F}from"./ModalMd-8f28dfb7.js";import{B as L}from"./ButtonSubmit-13f22934.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                */import"./leaflet-src-ccbfcb4d.js";import"./ModalLg-eeeaf3d4.js";const A={components:{Card:B,ButtonSubmit:L,ModalMd:F,Map:z,InputMapsMark:j,InputText:T,VueMaps:D,InputSelect:E},props:{dataKabupaten:Array,dataKecamatan:Array},setup(){const r=f({nama:null,kabupaten_id:null,koordinat:null}),n=f({id:null,nama:null,kabupaten_id:null,koordinat:null}),u=f({id:null,nama:null});return{form_tambah:r,form_edit:n,form_hapus:u}},data(){return{kabupaten:{},render_key:0}},watch:{"form_tambah.koordinat"(){this.render_key++}},computed:{viewMapKabupaten(){return this.dataKabupaten.find(r=>{if(r.id==this.form_tambah.kabupaten_id)return this.render_key++,r})}},methods:{submit_tambah(){this.form_tambah.post(route("master.kecamatan.store"),{preserveScroll:!0,onSuccess:()=>{this.form_tambah.reset()}})},get_edit(r){this.form_edit.id=r.id,this.form_edit.nama=r.nama,this.form_edit.kabupaten_id=r.kabupaten_id,this.form_edit.koordinat=JSON.parse(r.koordinat)},get_hapus(r){this.form_hapus.id=r.id,this.form_hapus.nama=r.nama},submit_edit(){this.form_edit.put(route("master.kecamatan.update",{kecamatan:this.form_edit.id}),{onSuccess:()=>{this.form_edit.reset(),document.getElementById("edit-kecamatan").click()}})},submit_hapus(){this.form_hapus.delete(route("master.kecamatan.destroy",{kecamatan:this.form_hapus.id}),{onSuccess:()=>{this.form_hapus.reset(),document.getElementById("hapus-kecamatan").click()}})}}},H={class:"grid grid-cols-1 lg:grid-cols-12 h-full w-full gap-2"},J={class:"form-control w-full max-w-xs"},O=t("label",{class:"label"},[t("span",{class:"label-text"},"Pilih Kabupaten")],-1),q=["value"],G=t("label",{class:"label"},null,-1),Q={class:"lg:col-span-12 max-h-[15rem] z-0 order-2"},R={class:"overflow-x-auto"},W={class:"table w-full table-compact table-zebra text-center"},X=t("thead",null,[t("tr",null,[t("td",null,"No"),t("td",null,"Kecamatan"),t("td",null,"kabupaten"),t("td",null,"Koordinat"),t("td",null,"opsi")])],-1),Y=t("td",null,null,-1),Z={class:"flex gap-2 justify-center"},$=["onClick"],aa=["onClick"],ta={class:"w-full lg:col-span-5 h-max z-10 order-3"},ea={class:"lg:col-span-7 h-[25rem] lg:h-full z-0 order-4"};function na(r,n,u,a,c,i){const v=m("Map"),p=m("Card"),h=m("input-select"),V=m("input-text"),g=m("InputMapsMark"),x=m("VueMaps"),y=m("ModalMd"),S=m("ButtonSubmit");return o(),_(k,null,[s(p,null,{default:l(()=>[t("div",H,[(o(),_("div",{class:"order-1 lg:col-span-12 h-[30rem] z-0",key:u.dataKabupaten},[s(p,{title:"Preview Map"},{default:l(()=>[t("div",J,[O,I(t("select",{class:"select select-sm select-bordered","onUpdate:modelValue":n[0]||(n[0]=e=>c.kabupaten=e)},[(o(!0),_(k,null,M(u.dataKabupaten,e=>(o(),_("option",{value:e},b(e.nama),9,q))),256))],512),[[N,c.kabupaten]]),G]),(o(),d(v,{dataKabupaten:c.kabupaten,key:c.kabupaten.koordinat},null,8,["dataKabupaten"]))]),_:1})])),t("div",Q,[s(p,{title:"Data Kabupaten"},{default:l(()=>[t("div",R,[t("table",W,[X,t("tbody",null,[(o(!0),_(k,null,M(u.dataKecamatan,(e,w)=>(o(),_("tr",{key:e.id},[t("td",null,b(w+1),1),Y,t("td",null,b(e.nama),1),t("td",null,b(e.koordinat),1),t("td",Z,[t("label",{for:"edit-kecamatan",onClick:C=>i.get_edit(e),class:"btn btn-xs btn-primary"}," edit ",8,$),t("label",{for:"hapus-kecamatan",onClick:C=>i.get_hapus(e),class:"btn btn-xs btn-error"}," Hapus ",8,aa)])]))),128))])])])]),_:1})]),t("div",ta,[(o(),d(p,{title:"Tambah Kecamatan",action:"",key:a.form_tambah.kabupaten_id},{action:l(()=>[t("button",{class:K(["btn btn-success",{"btn-disabled loading":a.form_tambah.processing}]),onClick:n[4]||(n[4]=(...e)=>i.submit_tambah&&i.submit_tambah(...e))},"Simpan",2),t("button",{onClick:n[5]||(n[5]=e=>a.form_tambah.reset()),class:"btn btn-error"},"reset")]),default:l(()=>[s(h,{inputValue:a.form_tambah.kabupaten_id,"onUpdate:inputValue":n[1]||(n[1]=e=>a.form_tambah.kabupaten_id=e),dataSelect:u.dataKabupaten,label:"nama",pick:"id",title:"pilih kabupaten"},null,8,["inputValue","dataSelect"]),s(V,{inputValue:a.form_tambah.nama,"onUpdate:inputValue":n[2]||(n[2]=e=>a.form_tambah.nama=e),error:a.form_tambah.errors.nama,title:"Nama Kecamatan"},null,8,["inputValue","error"]),(o(),d(g,{id:"tambahKecamatan",title:"koordinat",inputValue:a.form_tambah.koordinat,"onUpdate:inputValue":n[3]||(n[3]=e=>a.form_tambah.koordinat=e),key:a.form_tambah.koordinat,error:a.form_tambah.errors.koordinat},null,8,["inputValue","error"]))]),_:1}))]),t("div",ea,[s(p,{title:"Pratinjau"},{default:l(()=>[(o(),d(x,{nama:a.form_tambah.nama,setView:i.viewMapKabupaten?i.viewMapKabupaten.koordinat:null,koordinat:a.form_tambah.koordinat,key:c.render_key},null,8,["nama","setView","koordinat"]))]),_:1})])])]),_:1}),s(y,{id:"edit-kecamatan",close:""},{action:l(()=>[t("button",{class:K(["btn btn-success",{"btn-disabled loading":a.form_edit.processing}]),onClick:n[9]||(n[9]=(...e)=>i.submit_edit&&i.submit_edit(...e))},"Simpan",2)]),default:l(()=>[(o(),d(h,{inputValue:a.form_edit.kabupaten_id,"onUpdate:inputValue":n[6]||(n[6]=e=>a.form_edit.kabupaten_id=e),key:a.form_edit.kabupaten_id,dataSelect:u.dataKabupaten,label:"nama",pick:"id",title:"pilih kabupaten"},null,8,["inputValue","dataSelect"])),(o(),d(V,{inputValue:a.form_edit.nama,"onUpdate:inputValue":n[7]||(n[7]=e=>a.form_edit.nama=e),key:a.form_edit.nama,error:a.form_edit.errors.nama,title:"Nama Kecamatan"},null,8,["inputValue","error"])),(o(),d(g,{id:"editKecamatan",title:"koordinat",inputValue:a.form_edit.koordinat,"onUpdate:inputValue":n[8]||(n[8]=e=>a.form_edit.koordinat=e),key:a.form_edit.koordinat,error:a.form_edit.errors.koordinat},null,8,["inputValue","error"]))]),_:1}),(o(),d(y,{id:"hapus-kecamatan",title:`Lanjutkan menghapus ${a.form_hapus.nama} ?`,key:a.form_hapus.nama,close:""},{action:l(()=>[s(S,{type:"error",onClick:i.submit_hapus,form:a.form_hapus},{default:l(()=>[U("Lanjutkan")]),_:1},8,["onClick","form"])]),_:1},8,["title"]))],64)}const ka=P(A,[["render",na]]);export{ka as default};
