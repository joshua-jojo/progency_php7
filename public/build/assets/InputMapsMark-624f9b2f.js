/* empty css                */import{L as l}from"./leaflet-src-ccbfcb4d.js";import{o as m,c as u,b as a,j as _,J as V,F as g,r as h,t as p,p as w,e as f,a as b,w as v,d as x}from"./app-1e1e7699.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{M as y}from"./ModalLg-eeeaf3d4.js";const S={setup(e){var o=null,t=e.coordinateValue,s;return{map:o,koordinat:t,mark:s}},beforeMount(){var e=document.getElementById(this.id);e&&e.remove()},props:{coordinateValue:Array,id:String,setViewZoom:String,setView:String},async mounted(){var e=await(this.coordinateValue?this.coordinateValue:[-1.62186,103.58849]),o=await(this.setView?this.setView:[-1.62186,103.58849]);await this.coordinateValue?this.map=await l.map(this.id).setView(e,this.setViewZoom?this.setViewZoom:9):this.map=await l.map(this.id).setView(o,this.setViewZoom?this.setViewZoom:9),await l.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,minZoom:9}).addTo(this.map),this.map.on("click",t=>{if(!this.mark||!this.mark._map){var s=t.latlng.lat,i=t.latlng.lng;this.get_koordinat([s,i]),this.$emit("update:coordinateValue",[s,i])}this.mark.on("dragend",r=>{var n=r.target._latlng.lat,d=r.target._latlng.lng;this.koordinat=[n,d],this.$emit("update:coordinateValue",[n,d])})}),await this.coordinateValue&&(this.mark=l.marker(this.coordinateValue,{draggable:!0}),this.mark.addTo(this.map),this.mark.on("dragend",t=>{var s=t.target._latlng.lat,i=t.target._latlng.lng;this.koordinat=[s,i],this.$emit("update:coordinateValue",this.koordinat)}))},methods:{get_koordinat(e){this.koordinat=e,this.mark=l.marker(e,{draggable:!0}),this.mark.addTo(this.map),this.mark.bindPopup(this.$refs.button_hapus).openPopup(),this.$emit("update:coordinateValue",e)},hapus_mark(){this.map.removeLayer(this.mark),this.$emit("update:coordinateValue",[])}}},Z=["id"];function L(e,o,t,s,i,r){return m(),u(g,null,[a("div",{id:t.id,class:"w-full h-full"},null,8,Z),_(a("template",null,[a("button",{ref:"button_hapus",onClick:o[0]||(o[0]=n=>r.hapus_mark()),class:"btn btn-error btn-sm"},"hapus",512)],512),[[V,!1]])],64)}const M=k(S,[["render",L]]),B={props:{title:String,inputValue:String,setView:String,setViewZoom:String,error:String,id:String},components:{ModalLg:y,MarkLocation:M},data(){return{koordinat:this.inputValue}},watch:{koordinat(e){this.$emit("update:inputValue",e)}}},C={class:"form-control w-full"},T={class:"form-control w-full"},I={class:"label"},N={class:"label-text capitalize"},P={class:"grid grid-cols-4 lg:grid-cols-6 gap-2"},$=["placeholder"],z=["for"],D={key:0,class:"label"},E={class:"label-text-alt text-error"},F={class:"h-[25rem] bg-red-400"};function U(e,o,t,s,i,r){const n=h("mark-location"),d=h("modal-lg");return m(),u(g,null,[a("div",C,[a("div",T,[a("label",I,[a("span",N,p(t.title),1)]),a("div",P,[_(a("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=c=>i.koordinat=c),disabled:"",placeholder:"Masukkan "+t.title,class:"input order-last input-bordered w-full lg:col-span-5 col-span-3"},null,8,$),[[w,i.koordinat]]),a("label",{for:t.id+"modal",class:"btn btn-primary col-span-1"}," maps ",8,z)]),t.error?(m(),u("label",D,[a("span",E,p(t.error),1)])):f("",!0)])]),b(d,{id:t.id+"modal",title:"Pilih Lokasi",close:""},{default:v(()=>[a("div",F,[(m(),x(n,{setViewZoom:t.setViewZoom,setView:t.setView,id:t.id+"maps",key:t.id+"maps",coordinateValue:i.koordinat,"onUpdate:coordinateValue":o[1]||(o[1]=c=>i.koordinat=c)},null,8,["setViewZoom","setView","id","coordinateValue"]))])]),_:1},8,["id"])],64)}const H=k(B,[["render",U]]);export{H as I};
